(this["webpackJsonpweb-authentication-example-client"]=this["webpackJsonpweb-authentication-example-client"]||[]).push([[0],{34:function(e,t,n){e.exports=n(67)},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(11),c=n.n(u),o=n(2),s=n(7),i=n(31),l=n(8),m={token:"",authErrMsg:"",userGreeting:""},h=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/update_token":return Object(l.a)({},e,{token:t.token});case"auth/update_user_auth_err_msg":return Object(l.a)({},e,{authErrMsg:t.authErrMsg});case"auth/reset_user_auth_err_msg":return Object(l.a)({},e,{authErrMsg:m.authErrMsg});case"auth/get_user_greetings":return Object(l.a)({},e,{userGreeting:t.payload});default:return e}}}),b=n(6),g=n(1),p=n(32),f=n.n(p),E=n(14),d=n.n(E),v=function(e){var t=e.response.data.token,n=e.dispatch,a=e.cb,r=void 0===a?function(){}:a;localStorage.setItem("token",t),n({type:"auth/update_token",token:t}),r()},O=function(){return{type:"auth/reset_user_auth_err_msg"}},_=Object(o.b)(null,{logout:function(){return localStorage.removeItem("token"),{type:"auth/update_token",token:""}}})((function(e){var t=e.logout,n=Object(g.g)(),u=Object(a.useCallback)((function(){t(),n.push("/login")}),[t,n]);return r.a.createElement("div",{className:"header"},r.a.createElement(b.c,{exact:!0,to:"/",activeClassName:"active"},"Home"),r.a.createElement("div",{className:"right-navs"},r.a.createElement("div",{className:"logout",onClick:u},"Logout")))})),j=(n(63),_),k=Object(o.b)((function(e){return{token:e.auth.token,userGreeting:e.auth.userGreeting}}),{getUserGreetings:function(){return function(e,t){var n=t().auth.token;d.a.get("http://localhost:3090/",{headers:{authorization:n}}).then((function(t){e({type:"auth/get_user_greetings",payload:t.data})}))}}})((function(e){var t=e.getUserGreetings,n=e.token,u=e.userGreeting;return Object(a.useEffect)((function(){n&&t()})),r.a.createElement("div",{className:"home"},r.a.createElement(j,null),r.a.createElement("div",{className:"content"},u||"Hello React!"))})),M=(n(64),k),y=n(13),S=n(33),w=Object(o.b)((function(e){return{authErrMsg:e.auth.authErrMsg}}))((function(e){var t=e.className,n=void 0===t?"":t,u=e.title,c=void 0===u?"Welcome":u,o=e.formType,s=e.onSubmit,i=e.authErrMsg,m=Object(a.useState)({email:"",password:""}),h=Object(S.a)(m,2),g=h[0],p=h[1],f=Object(a.useMemo)((function(){return"login"===o&&r.a.createElement("div",{className:"links"},r.a.createElement(b.b,{to:"/signup"},"Signup"),r.a.createElement("span",{className:"partition"},"|"),r.a.createElement(b.b,{to:"/?isForDemo=true"},"Skip"))}),[o]),E=Object(a.useCallback)((function(e){var t=e.target,n=t.id,a=t.value;p((function(e){return Object(l.a)({},e,Object(y.a)({},n,a))}))}),[]),d=Object(a.useCallback)((function(e){e.preventDefault(),s(g)}),[s,g]);return r.a.createElement("div",{className:"user-form ".concat(n)},r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"title"},c),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",type:"email",value:g.email,onChange:E,required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",type:"password",value:g.password,onChange:E,required:!0}),r.a.createElement("div",{className:"err"},i),r.a.createElement("button",{type:"submit"},"Submit"),f))})),N=(n(65),w),C=Object(o.b)(null,{signin:function(e){var t=e.formData,n=e.cb;return function(e){d.a.post("http://localhost:3090/signin",t).then((function(t){v({response:t,dispatch:e,cb:n})})).catch((function(){e({type:"auth/update_user_auth_err_msg",authErrMsg:"Invalid login credentials"})}))}},resetAuthErrMsg:O})((function(e){var t=e.signin,n=e.resetAuthErrMsg,u=Object(g.g)(),c=Object(a.useCallback)((function(e){t({formData:e,cb:function(){u.push("/")}})}),[u,t]);return Object(a.useEffect)((function(){return function(){n()}})),r.a.createElement(N,{formType:"login",onSubmit:c})})),D=Object(o.b)(null,{signup:function(e){var t=e.formData,n=e.cb;return function(e){d.a.post("http://localhost:3090/signup",t).then((function(t){v({response:t,dispatch:e,cb:n})})).catch((function(t){var n=t.response.data.error;e({type:"auth/update_user_auth_err_msg",authErrMsg:n})}))}},resetAuthErrMsg:O})((function(e){var t=e.signup,n=e.resetAuthErrMsg,u=Object(g.g)(),c=Object(a.useCallback)((function(e){t({formData:e,cb:function(){u.push("/")}})}),[u,t]);return Object(a.useEffect)((function(){return function(){n()}})),r.a.createElement(N,{title:"Signup",formType:"signup",onSubmit:c})})),G=(n(66),Object(o.b)((function(e){return{token:e.auth.token}}))((function(e){var t=e.token,n=Object(g.h)(),u=Object(a.useMemo)((function(){return n.search&&f.a.parse(n.search.substr(1)).isForDemo}),[n]),c=Object(a.useMemo)((function(){return!!t||u}),[t,u]);return r.a.createElement("div",null,r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/"},c?r.a.createElement(M,null):r.a.createElement(g.a,{to:"/login"})),r.a.createElement(g.b,{path:"/login",component:C}),r.a.createElement(g.b,{path:"/signup",component:D})))}))),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,I=Object(s.e)(h,{auth:{token:localStorage.getItem("token")||null}},x(Object(s.a)(i.a)));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:I},r.a.createElement(b.a,{basename:"/web-authentication-example"},r.a.createElement(G,null)))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.a0b9fafe.chunk.js.map