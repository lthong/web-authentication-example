(this["webpackJsonpweb-authentication-example-client"]=this["webpackJsonpweb-authentication-example-client"]||[]).push([[0],{33:function(e,t,a){e.exports=a(64)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),u=a.n(c),o=a(6),s=a(7),i=a(31),l=a(9),m={token:"",authErrMsg:""},p=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/update_token":return Object(l.a)({},e,{token:t.token});case"auth/update_user_auth_err_msg":return Object(l.a)({},e,{authErrMsg:t.authErrMsg});case"auth/reset_user_auth_err_msg":return Object(l.a)({},e,{authErrMsg:m.authErrMsg});default:return e}}}),h=a(5),f=a(1),E=function(){return r.a.createElement("div",{className:"header"},r.a.createElement(h.c,{exact:!0,to:"/",activeClassName:"active"},"Home"),r.a.createElement("div",{className:"right-navs"},r.a.createElement(h.c,{to:"/login",activeClassName:"active",className:"logout"},"Logout")))},b=(a(43),E),g=function(){return r.a.createElement("div",{className:"home"},r.a.createElement(b,null),r.a.createElement("div",{className:"content"},"Home"))},d=(a(44),g),v=a(13),_=a(32),O=Object(o.b)((function(e){return{authErrMsg:e.auth.authErrMsg}}))((function(e){var t=e.className,a=void 0===t?"":t,c=e.title,u=void 0===c?"Welcome":c,o=e.formType,s=e.onSubmit,i=e.authErrMsg,m=Object(n.useState)({email:"",password:""}),p=Object(_.a)(m,2),f=p[0],E=p[1],b=Object(n.useMemo)((function(){return"login"===o&&r.a.createElement("div",{className:"links"},r.a.createElement(h.b,{to:"/signup"},"Signup"),r.a.createElement("span",{className:"partition"},"|"),r.a.createElement(h.b,{to:"/"},"Skip"))}),[o]),g=Object(n.useCallback)((function(e){var t=e.target,a=t.id,n=t.value;E((function(e){return Object(l.a)({},e,Object(v.a)({},a,n))}))}),[]),d=Object(n.useCallback)((function(e){e.preventDefault(),s(f)}),[s,f]);return r.a.createElement("div",{className:"user-form ".concat(a)},r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"title"},u),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",type:"email",value:f.email,onChange:g,required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",type:"password",value:f.password,onChange:g,required:!0}),r.a.createElement("div",{className:"err"},i),r.a.createElement("button",{type:"submit"},"Submit"),b))})),j=(a(45),O),k=a(19),M=a.n(k),N=function(e){var t=e.response.data.token,a=e.dispatch,n=e.cb,r=void 0===n?function(){}:n;localStorage.setItem("token",t),a({type:"auth/update_token",token:t}),r()},S=function(){return{type:"auth/reset_user_auth_err_msg"}},w=Object(o.b)(null,{signin:function(e){var t=e.formData,a=e.cb;return function(e){M.a.post("http://localhost:3090/signin",t).then((function(t){N({response:t,dispatch:e,cb:a})})).catch((function(){e({type:"auth/update_user_auth_err_msg",authErrMsg:"Invalid login credentials"})}))}},resetAuthErrMsg:S})((function(e){var t=e.signin,a=e.resetAuthErrMsg,c=Object(f.f)(),u=Object(n.useCallback)((function(e){t({formData:e,cb:function(){c.push("/")}})}),[c,t]);return Object(n.useEffect)((function(){return function(){a()}})),r.a.createElement(j,{formType:"login",onSubmit:u})})),y=Object(o.b)(null,{signup:function(e){var t=e.formData,a=e.cb;return function(e){M.a.post("http://localhost:3090/signup",t).then((function(t){N({response:t,dispatch:e,cb:a})})).catch((function(t){var a=t.response.data.error;e({type:"auth/update_user_auth_err_msg",authErrMsg:a})}))}},resetAuthErrMsg:S})((function(e){var t=e.signup,a=e.resetAuthErrMsg,c=Object(f.f)(),u=Object(n.useCallback)((function(e){t({formData:e,cb:function(){c.push("/")}})}),[c,t]);return Object(n.useEffect)((function(){return function(){a()}})),r.a.createElement(j,{title:"Signup",formType:"signup",onSubmit:u})})),C=(a(63),function(){return r.a.createElement("div",null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:d}),r.a.createElement(f.a,{path:"/login",component:w}),r.a.createElement(f.a,{path:"/signup",component:y})))}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,x=Object(s.e)(p,{auth:{token:localStorage.getItem("token")||null}},D(Object(s.a)(i.a)));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:x},r.a.createElement(h.a,{basename:"/web-authentication-example"},r.a.createElement(C,null)))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.c63f5949.chunk.js.map